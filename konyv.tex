\documentclass[a5paper]{book}

\setlength\marginparwidth{30pt}

\usepackage[utf8]{inputenc}
\usepackage{t1enc}
\def\magyarOptions{defaults=hu-min}
\usepackage[magyar]{babel}
\addto\captionsmagyar{\renewcommand{\chaptername}{lecke}}

\usepackage{adjustbox}
\usepackage{amsmath}
\usepackage{fancyvrb}
\usepackage{imakeidx}
\usepackage{pdfpages}
\usepackage{tcolorbox}

% Layout for debugging
%\usepackage{showframe}

\makeindex[intoc]

% Definitions
\newenvironment{prolog}{
  \VerbatimEnvironment
  \par\vspace{5pt}
  \begin{adjustbox}{minipage=\textwidth-10pt,padding=5pt,bgcolor=black!5}
    \begin{BVerbatim}
  }{
    \end{BVerbatim}
  \end{adjustbox}
  \par\vspace{5pt}\noindent
}
\newcommand{\pr}[1]{{\tt #1}}
\newcommand{\name}[1]{{\sc #1}}
\newtheorem{problem}{Feladat}
\newenvironment{infobox}[2]{
  \begin{tcolorbox}[center,
                    float,
                    fonttitle=\sffamily\bfseries,
                    title={\center Kitérő: \emph{#2}},
                    width=#1\linewidth]
  }{
  \end{tcolorbox}
}

\begin{document}

\frontmatter
\pagenumbering{roman}

% Cover page
\includepdf{images/cover.pdf}

% Inside cover
\thispagestyle{empty}
\newpage

% Flyleaf
\begin{titlepage}
\thispagestyle{empty}
\centering
\vspace*{2cm}
{\large OLDD MEG PROLOGBAN!}
\end{titlepage}

% Inside cover
\thispagestyle{empty}
\newpage

% Title page
\begin{titlepage}
\centering
\vspace*{2cm}
{\Large OLDD MEG PROLOGBAN!}\\
\vspace{8cm}
{\large Salvi Péter}\\
\vspace{1em}
2022
\end{titlepage}

% Kolofon
\thispagestyle{empty}
\begin{center}
  \small
  Salvi Péter: Oldd meg Prologban!\\
  Budapest, 2022 (\input{revision}verzió)\\
  \bigskip
  A könyv a Creative Commons \emph{Share Alike} licencnek megfelelően
  szabadon terjeszthető.
\end{center}
\vspace*{\fill}
{\footnotesize Ez a könyv a \LaTeX\ rendszer segítségével készült.\\
  A borítón egy Lindenmayer-rendszer, az ún.~\emph{sárkány görbe} látható.
}

% Ajanlas
\clearpage
\thispagestyle{empty}
\begin{center}
  \vspace*{\fill}
  {\Large\emph{Zsófinak és Julinak}}
  \vspace*{\fill}
\end{center}
\clearpage

\thispagestyle{empty}
\newpage

\addtocounter{page}{2}

\tableofcontents

\include{eloszo}

\mainmatter
\pagenumbering{arabic}

\include{lesson1}
\include{lesson2}
\include{lesson3}
\include{lesson4}
\include{lesson5}
\include{lesson6}
\include{lesson7}

\backmatter

\chapter{Könyvajánló}
\include{konyvajanlo}

\chapter{Feladatok megoldásai}
\include{megoldasok}

\printindex

\end{document}
